/*!
* rete-connection-reroute-plugin v0.4.0 
* (c) 2021 Vitaliy Stoliarov 
* Released under the MIT license.
*/
!function(t){"use strict";var h,n=Object.prototype,c=n.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},o=e.iterator||"@@iterator",i=e.asyncIterator||"@@asyncIterator",r=e.toStringTag||"@@toStringTag",s="object"==typeof module,a=t.regeneratorRuntime;if(a)s&&(module.exports=a);else{(a=t.regeneratorRuntime=s?module.exports:{}).wrap=m;var u="suspendedStart",l="suspendedYield",_="executing",f="completed",p={},d={};d[o]=function(){return this};var y=Object.getPrototypeOf,v=y&&y(y(k([])));v&&v!==n&&c.call(v,o)&&(d=v);var x=E.prototype=w.prototype=Object.create(d);b.prototype=x.constructor=E,E.constructor=b,E[r]=b.displayName="GeneratorFunction",a.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===b||"GeneratorFunction"===(n.displayName||n.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,r in t||(t[r]="GeneratorFunction")),t.prototype=Object.create(x),t},a.awrap=function(t){return{__await:t}},A(L.prototype),L.prototype[i]=function(){return this},a.AsyncIterator=L,a.async=function(t,n,e,i){var o=new L(m(t,n,e,i));return a.isGeneratorFunction(n)?o:o.next().then(function(t){return t.done?t.value:o.next()})},A(x),x[r]="Generator",x[o]=function(){return this},x.toString=function(){return"[object Generator]"},a.keys=function(e){var i=[];for(var t in e)i.push(t);return i.reverse(),function t(){for(;i.length;){var n=i.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},a.values=k,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(S),!t)for(var n in this)"t"===n.charAt(0)&&c.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=h)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function t(t,n){return r.type="throw",r.arg=e,i.next=t,n&&(i.method="next",i.arg=h),!!n}for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n],r=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var s=c.call(o,"catchLoc"),a=c.call(o,"finallyLoc");if(s&&a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,n){for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e];if(i.tryLoc<=this.prev&&c.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=t,r.arg=n,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(r)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),p},finish:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),S(e),p}},catch:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var i=e.completion;if("throw"===i.type){var o=i.arg;S(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:k(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=h),p}}}function m(t,n,e,i){var o=n&&n.prototype instanceof w?n:w,r=Object.create(o.prototype),s=new T(i||[]);return r._invoke=function(r,s,a){var h=u;return function(t,n){if(h===_)throw new Error("Generator is already running");if(h===f){if("throw"===t)throw n;return C()}for(a.method=t,a.arg=n;;){var e=a.delegate;if(e){var i=P(e,a);if(i){if(i===p)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(h===u)throw h=f,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);h=_;var o=g(r,s,a);if("normal"===o.type){if(h=a.done?f:l,o.arg===p)continue;return{value:o.arg,done:a.done}}"throw"===o.type&&(h=f,a.method="throw",a.arg=o.arg)}}}(t,e,s),r}function g(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}function w(){}function b(){}function E(){}function A(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function L(h){var n;this._invoke=function(e,i){function t(){return new Promise(function(t,n){!function n(t,e,i,o){var r=g(h[t],h,e);if("throw"!==r.type){var s=r.arg,a=s.value;return a&&"object"==typeof a&&c.call(a,"__await")?Promise.resolve(a.__await).then(function(t){n("next",t,i,o)},function(t){n("throw",t,i,o)}):Promise.resolve(a).then(function(t){s.value=t,i(s)},o)}o(r.arg)}(e,i,t,n)})}return n=n?n.then(t,t):t()}}function P(t,n){var e=t.iterator[n.method];if(e===h){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=h,P(t,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=g(e,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=h),n.delegate=null,p):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function M(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function S(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function k(n){if(n){var t=n[o];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var e=-1,i=function t(){for(;++e<n.length;)if(c.call(n,e))return t.value=n[e],t.done=!1,t;return t.value=h,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:h,done:!0}}}(function(){return this}()||Function("return this")()),function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],n):n((t=t||self).ConnectionReroutePlugin={},t.Vue)}(this,function(t,r){"use strict";function _(o){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(t){var n,e,i;n=o,i=r[e=t],e in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i})}return o}function f(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(e.push(s.value),!n||e.length!==n);i=!0);}catch(t){o=!0,r=t}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r=r&&r.hasOwnProperty("default")?r.default:r;var w=Math.PI,d=2*w,b=1e-6,y=d-b;function n(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function v(){return new n}function x(t){return function(){return t}}n.prototype=v.prototype={constructor:n,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,i){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+i)},bezierCurveTo:function(t,n,e,i,o,r){this._+="C"+ +t+","+ +n+","+ +e+","+ +i+","+(this._x1=+o)+","+(this._y1=+r)},arcTo:function(t,n,e,i,o){t=+t,n=+n,e=+e,i=+i,o=+o;var r=this._x1,s=this._y1,a=e-t,h=i-n,c=r-t,u=s-n,l=c*c+u*u;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(b<l)if(Math.abs(u*a-h*c)>b&&o){var _=e-r,f=i-s,p=a*a+h*h,d=_*_+f*f,y=Math.sqrt(p),v=Math.sqrt(l),x=o*Math.tan((w-Math.acos((p+l-d)/(2*y*v)))/2),m=x/v,g=x/y;Math.abs(m-1)>b&&(this._+="L"+(t+m*c)+","+(n+m*u)),this._+="A"+o+","+o+",0,0,"+ +(c*f<u*_)+","+(this._x1=t+g*a)+","+(this._y1=n+g*h)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,n,e,i,o,r){t=+t,n=+n,r=!!r;var s=(e=+e)*Math.cos(i),a=e*Math.sin(i),h=t+s,c=n+a,u=1^r,l=r?i-o:o-i;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+h+","+c:(Math.abs(this._x1-h)>b||Math.abs(this._y1-c)>b)&&(this._+="L"+h+","+c),e&&(l<0&&(l=l%d+d),y<l?this._+="A"+e+","+e+",0,1,"+u+","+(t-s)+","+(n-a)+"A"+e+","+e+",0,1,"+u+","+(this._x1=h)+","+(this._y1=c):b<l&&(this._+="A"+e+","+e+",0,"+ +(w<=l)+","+u+","+(this._x1=t+e*Math.cos(o))+","+(this._y1=n+e*Math.sin(o))))},rect:function(t,n,e,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +i+"h"+-e+"Z"},toString:function(){return this._}};Math.PI;function e(t){this._context=t}function m(t){return new e(t)}function g(t){return t[0]}function E(t){return t[1]}function i(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function o(t,n){this._context=t,this._k=(1-n)/6}function s(t,n){this._context=t,this._alpha=n}e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}},o.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:i(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:i(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}},s.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,i=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:!function(t,n,e){var i=t._x1,o=t._y1,r=t._x2,s=t._y2;if(1e-12<t._l01_a){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,h=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/h,o=(o*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/h}if(1e-12<t._l23_a){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);r=(r*c+t._x1*t._l23_2a-n*t._l12_2a)/u,s=(s*c+t._y1*t._l23_2a-e*t._l12_2a)/u}t._context.bezierCurveTo(i,o,r,s,t._x2,t._y2)}(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var a=function n(e){function t(t){return e?new s(t,e):new o(t,0)}return t.alpha=function(t){return n(+t)},t}(.5);function h(t){return t<0?-1:1}function c(t,n,e){var i=t._x1-t._x0,o=n-t._x1,r=(t._y1-t._y0)/(i||o<0&&-0),s=(e-t._y1)/(o||i<0&&-0),a=(r*o+s*i)/(i+o);return(h(r)+h(s))*Math.min(Math.abs(r),Math.abs(s),.5*Math.abs(a))||0}function u(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function l(t,n,e){var i=t._x0,o=t._y0,r=t._x1,s=t._y1,a=(r-i)/3;t._context.bezierCurveTo(i+a,o+a*n,r-a,s-a*e,r,s)}function A(t){this._context=t}function L(t){this._context=t}A.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:l(this,this._t0,u(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(n=+n,(t=+t)!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,l(this,u(this,e=c(this,t,n)),e);break;default:l(this,this._t0,e=c(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(function(t){this._context=new L(t)}.prototype=Object.create(A.prototype)).point=function(t,n){A.prototype.point.call(this,n,t)},L.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,i,o,r){this._context.bezierCurveTo(n,t,i,e,r,o)}};var P=0,M=1,S=2,T={props:["pin","change","remove"],inject:["editor","connection"],data:function(){return{state:S}},mounted:function(){window.addEventListener("pointermove",this.move),window.addEventListener("pointerup",this.up)},destroyed:function(){window.removeEventListener("pointermove",this.move),window.removeEventListener("pointerup",this.up)},methods:{setPosition:function(t,n){this.$emit("change",{x:t,y:n}),this.$forceUpdate()},down:function(t){t.stopPropagation(),this.state=P},move:function(t){if(this.state!==S){this.state=M,t.preventDefault();var n=this.editor.view.area.mouse;this.setPosition(n.x,n.y)}},up:function(t){this.state=S},pinup:function(){this.state!==M&&this.$emit("remove",this.pin)}}};var k=function(t,n,e,i,o,r,s,a,h,c){"boolean"!=typeof s&&(h=a,a=s,s=!1);var u,l="function"==typeof e?e.options:e;if(t&&t.render&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,o&&(l.functional=!0)),i&&(l._scopeId=i),r?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,h(t)),t&&t._registeredComponents&&t._registeredComponents.add(r)},l._ssrRegister=u):n&&(u=s?function(){n.call(this,c(this.$root.$options.shadowRoot))}:function(t){n.call(this,a(t))}),u)if(l.functional){var _=l.render;l.render=function(t,n){return u.call(n),_(t,n)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,u):[u]}return e},C="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var O=document.head||document.getElementsByTagName("head")[0],N={};function j(t){return function(t,n){return function(t,n){var e=C?n.media||"default":t,i=N[e]||(N[e]={ids:new Set,styles:[]});if(!i.ids.has(t)){i.ids.add(t);var o=n.source;if(n.map&&(o+="\n/*# sourceURL="+n.map.sources[0]+" */",o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",n.media&&i.element.setAttribute("media",n.media),O.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(o),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{var r=i.ids.size-1,s=document.createTextNode(o),a=i.element.childNodes;a[r]&&i.element.removeChild(a[r]),a.length?i.element.insertBefore(s,a[r]):i.element.appendChild(s)}}}(t,n)}}function $(){var t=this,n=t.$createElement;return(t._self._c||n)("div",{staticClass:"pin",style:{left:t.pin.x+"px",top:t.pin.y+"px"},on:{pointerdown:t.down,pointerup:t.pinup}})}function R(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._l(e.pins,function(n){return i("Pin",{key:n.x+" "+n.y,attrs:{pin:n},on:{change:function(t){return e.change(n,t)},remove:function(t){return e.remove(n)}}})}),1)}var D=T,U=($._withStripped=!0,{props:["pins"],inject:["editor","connection"],methods:{change:function(t,n){var e=n.x,i=n.y;t.x=e,t.y=i,this.editor.view.connections.get(this.connection).update()},remove:function(t){this.pins.splice(this.pins.indexOf(t),1),this.editor.view.connections.get(this.connection).update(),this.$forceUpdate()}},components:{Pin:k({render:$,staticRenderFns:[]},function(t){t&&t("data-v-1fb63c91_0",{source:".pin[data-v-1fb63c91] {\n  position: absolute;\n  display: inline;\n  width: 20px;\n  height: 20px;\n  background: #8db3d3;\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n}\n\n/*# sourceMappingURL=Pin.vue.map */",map:{version:3,sources:["/home/DN220789NKS1/www/connection-reroute-plugin/src/Pin.vue","Pin.vue"],names:[],mappings:"AA+DA;EACA,kBAAA;EACA,eAAA;EACA,WALA;EAMA,YANA;EAOA,mBAAA;EACA,kBAAA;EACA,gCAAA;AAAA;;AC7DA,kCAAkC",file:"Pin.vue",sourcesContent:["<template lang=\"pug\">\n.pin(\n  :style=\"{left: pin.x+'px', top: pin.y+'px'}\"\n  @pointerdown=\"down\"\n  @pointerup=\"pinup\"\n)\n</template>\n\n\n<script>\nconst State = { PICKED: 0, MOVED: 1, DROPED: 2}\n\nexport default {\n  props: ['pin', 'change', 'remove'],\n  inject: ['editor', 'connection'],\n  data() {\n    return {\n      state: State.DROPED\n    }\n  },\n  mounted() {\n    window.addEventListener('pointermove', this.move);\n    window.addEventListener('pointerup', this.up);\n  },\n  destroyed() {\n    window.removeEventListener('pointermove', this.move);\n    window.removeEventListener('pointerup', this.up);\n  },\n  methods: {\n    setPosition(x, y) {\n      this.$emit('change', {x, y});\n      this.$forceUpdate();\n    },\n    down(e){\n      e.stopPropagation();\n      this.state = State.PICKED;\n    },\n    move(e){\n      if(this.state === State.DROPED) return;\n\n      this.state = State.MOVED;\n      e.preventDefault();\n\n      const { mouse } = this.editor.view.area;\n\n      this.setPosition(mouse.x, mouse.y);\n    },\n    up(e) {\n      this.state = State.DROPED;\n    },\n    pinup() {\n      if(this.state === State.MOVED) return;\n\n      this.$emit('remove', this.pin);\n    }\n  }\n}\n<\/script>\n\n\n<style lang=\"sass\" scoped>\n$size: 20px\n\n.pin\n  position: absolute\n  display: inline\n  width: $size\n  height: $size\n  background: lighten(steelblue, 20%)\n  border-radius: 50%\n  transform: translate(-50%, -50%)\n</style>\n",".pin {\n  position: absolute;\n  display: inline;\n  width: 20px;\n  height: 20px;\n  background: #8db3d3;\n  border-radius: 50%;\n  transform: translate(-50%, -50%); }\n\n/*# sourceMappingURL=Pin.vue.map */"]},media:void 0})},D,"data-v-1fb63c91",!1,void 0,j,void 0)}}),I=(R._withStripped=!0,k({render:R,staticRenderFns:[]},void 0,U,void 0,!1,void 0,void 0,void 0));function z(t,n){return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))}function F(t){for(var n,e,i,o,r,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],a=-1,h=1/0,c=0;c<s.length-1;c++)if(q(t,s[c],s[c+1])){var u=(n=t,e=s[c],i=s[c+1],void 0,o=(i.y-e.y)*n.x-(i.x-e.x)*n.y+i.x*e.y-i.y*e.x,r=Math.pow(i.y-e.y,2)+Math.pow(i.x-e.x,2),Math.abs(o)/Math.sqrt(r));u<h&&(a=c,h=u)}return-1===a?function(t){for(var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],e=-1,i=1/0,o=0;o<n.length;o++){var r=z(t,n[o]);r<i&&(e=o,i=r)}return 0===e?0:e===n.length-1?e-1:z(t,n[e-1])<z(n[e],n[e-1])?e-1:e}(t,s):a}function q(t,n,e){var i=n.x,o=n.y,r=e.x,s=e.y,a=t.x,h=t.y;return i<a&&a<r&&o<h&&h<s||(r<a&&a<i&&s<h&&h<o||(i<a&&a<r&&h<o&&s<h||r<a&&a<i&&h<s&&o<h))}var G={name:"connection-reroute",install:function(u,t){var n=t.curve,c=void 0===n?a.alpha(1):n,e=t.curvature,l=void 0===e?.05:e;u.on("connectionpath",function(t){var n=t.connection,e=f(t.points,4),i=e[0],o=e[1],r=e[2],s=e[3],a=n&&n.data.pins?n.data.pins:[],h=function(t,n){var e=t[0],i=t[1],o=t[t.length-2],r=t[t.length-1],s=e[0]+Math.abs(i[0]-e[0])*n,a=r[0]-Math.abs(r[0]-o[0])*n;return(t=p(t)).splice(1,0,[s,e[1]]),t.splice(t.length-1,0,[a,r[1]]),t}([[i,o]].concat(p(a.map(function(t){return[t.x,t.y]})),[[r,s]]),l);t.d=function(){var s=g,a=E,h=x(!0),c=null,u=m,l=null;function n(t){var n,e,i,o=t.length,r=!1;for(null==c&&(l=u(i=v())),n=0;n<=o;++n)!(n<o&&h(e=t[n],n,t))===r&&((r=!r)?l.lineStart():l.lineEnd()),r&&l.point(+s(e,n,t),+a(e,n,t));if(i)return l=null,i+""||null}return n.x=function(t){return arguments.length?(s="function"==typeof t?t:x(+t),n):s},n.y=function(t){return arguments.length?(a="function"==typeof t?t:x(+t),n):a},n.defined=function(t){return arguments.length?(h="function"==typeof t?t:x(!!t),n):h},n.curve=function(t){return arguments.length?(u=t,null!=c&&(l=u(c)),n):u},n.context=function(t){return arguments.length?(null==t?c=l=null:l=u(c=t),n):c},n}().x(function(t){return t[0]}).y(function(t){return t[1]}).curve(c)(h)});var o=!1;u.on("renderconnection",function(t){var n=t.el,a=t.connection,e=n.querySelector(".connection path"),h=a.data.pins||(a.data.pins=[]);if(n.classList.add("bpm-connect-rete"),!e)throw new Error("<path> not found");a.data.color&&e.style.setProperty("stroke",a.data.color),e.addEventListener("click",function(){o&&o.classList.remove("select-connection"),n.classList.add("select-connection"),o=n}),a.addPink=function(){var t=_({},u.view.area.mouse),n=f(u.view.connections.get(a).getPoints(),4),e=n[0],i=n[1],o=n[2],r=n[3],s=F(t,[{x:e,y:i}].concat(p(h),[{x:o,y:r}]));h.splice(s,0,t),c.$children[0].$forceUpdate(),u.view.connections.get(a).update()},e.addEventListener("dblclick",function(){var t=_({},u.view.area.mouse),n=f(u.view.connections.get(a).getPoints(),4),e=n[0],i=n[1],o=n[2],r=n[3],s=F(t,[{x:e,y:i}].concat(p(h),[{x:o,y:r}]));h.splice(s,0,t),c.$children[0].$forceUpdate(),u.view.connections.get(a).update()});var i=document.createElement("div");n.appendChild(i);var c=new r({provide:{editor:u,connection:a},render:function(t){return t(I,{props:{pins:h}})}}).$mount(i)})}};t.default=G,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=connection-reroute-plugin.min.js.map
