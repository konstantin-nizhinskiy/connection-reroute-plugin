/*!
* rete-connection-reroute-plugin v0.4.0 
* (c) 2021 Vitaliy Stoliarov 
* Released under the MIT license.
*/
!function(t){"use strict";var c,e=Object.prototype,h=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",r=n.toStringTag||"@@toStringTag",s="object"==typeof module,a=t.regeneratorRuntime;if(a)s&&(module.exports=a);else{(a=t.regeneratorRuntime=s?module.exports:{}).wrap=m;var u="suspendedStart",l="suspendedYield",_="executing",f="completed",p={},d={};d[o]=function(){return this};var y=Object.getPrototypeOf,v=y&&y(y(T([])));v&&v!==e&&h.call(v,o)&&(d=v);var x=E.prototype=w.prototype=Object.create(d);b.prototype=x.constructor=E,E.constructor=b,E[r]=b.displayName="GeneratorFunction",a.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,r in t||(t[r]="GeneratorFunction")),t.prototype=Object.create(x),t},a.awrap=function(t){return{__await:t}},A(L.prototype),L.prototype[i]=function(){return this},a.AsyncIterator=L,a.async=function(t,e,n,i){var o=new L(m(t,e,n,i));return a.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},A(x),x[r]="Generator",x[o]=function(){return this},x.toString=function(){return"[object Generator]"},a.keys=function(n){var i=[];for(var t in n)i.push(t);return i.reverse(),function t(){for(;i.length;){var e=i.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=T,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(M),!t)for(var e in this)"t"===e.charAt(0)&&h.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=c)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var i=this;function t(t,e){return r.type="throw",r.arg=n,i.next=t,e&&(i.method="next",i.arg=c),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],r=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var s=h.call(o,"catchLoc"),a=h.call(o,"finallyLoc");if(s&&a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&h.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=t,r.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var o=i.arg;M(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=c),p}}}function m(t,e,n,i){var o=e&&e.prototype instanceof w?e:w,r=Object.create(o.prototype),s=new S(i||[]);return r._invoke=function(r,s,a){var c=u;return function(t,e){if(c===_)throw new Error("Generator is already running");if(c===f){if("throw"===t)throw e;return C()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){var i=P(n,a);if(i){if(i===p)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===u)throw c=f,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=_;var o=g(r,s,a);if("normal"===o.type){if(c=a.done?f:l,o.arg===p)continue;return{value:o.arg,done:a.done}}"throw"===o.type&&(c=f,a.method="throw",a.arg=o.arg)}}}(t,n,s),r}function g(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function w(){}function b(){}function E(){}function A(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function L(c){var e;this._invoke=function(n,i){function t(){return new Promise(function(t,e){!function e(t,n,i,o){var r=g(c[t],c,n);if("throw"!==r.type){var s=r.arg,a=s.value;return a&&"object"==typeof a&&h.call(a,"__await")?Promise.resolve(a.__await).then(function(t){e("next",t,i,o)},function(t){e("throw",t,i,o)}):Promise.resolve(a).then(function(t){s.value=t,i(s)},o)}o(r.arg)}(n,i,t,e)})}return e=e?e.then(t,t):t()}}function P(t,e){var n=t.iterator[e.method];if(n===c){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=c,P(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=g(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,p;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=c),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(h.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=c,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:c,done:!0}}}(function(){return this}()||Function("return this")()),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],e):e((t=t||self).ConnectionReroutePlugin={},t.Vue)}(this,function(t,s){"use strict";function _(o){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},e=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.forEach(function(t){var e,n,i;e=o,i=r[n=t],n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i})}return o}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}s=s&&s.hasOwnProperty("default")?s.default:s;var w=Math.PI,d=2*w,b=1e-6,y=d-b;function e(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function v(){return new e}function x(t){return function(){return t}}e.prototype=v.prototype={constructor:e,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,o,r){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+o)+","+(this._y1=+r)},arcTo:function(t,e,n,i,o){t=+t,e=+e,n=+n,i=+i,o=+o;var r=this._x1,s=this._y1,a=n-t,c=i-e,h=r-t,u=s-e,l=h*h+u*u;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(b<l)if(Math.abs(u*a-c*h)>b&&o){var _=n-r,f=i-s,p=a*a+c*c,d=_*_+f*f,y=Math.sqrt(p),v=Math.sqrt(l),x=o*Math.tan((w-Math.acos((p+l-d)/(2*y*v)))/2),m=x/v,g=x/y;Math.abs(m-1)>b&&(this._+="L"+(t+m*h)+","+(e+m*u)),this._+="A"+o+","+o+",0,0,"+ +(h*f<u*_)+","+(this._x1=t+g*a)+","+(this._y1=e+g*c)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,i,o,r){t=+t,e=+e,r=!!r;var s=(n=+n)*Math.cos(i),a=n*Math.sin(i),c=t+s,h=e+a,u=1^r,l=r?i-o:o-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+c+","+h:(Math.abs(this._x1-c)>b||Math.abs(this._y1-h)>b)&&(this._+="L"+c+","+h),n&&(l<0&&(l=l%d+d),y<l?this._+="A"+n+","+n+",0,1,"+u+","+(t-s)+","+(e-a)+"A"+n+","+n+",0,1,"+u+","+(this._x1=c)+","+(this._y1=h):b<l&&(this._+="A"+n+","+n+",0,"+ +(w<=l)+","+u+","+(this._x1=t+n*Math.cos(o))+","+(this._y1=e+n*Math.sin(o))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};Math.PI;function n(t){this._context=t}function m(t){return new n(t)}function g(t){return t[0]}function E(t){return t[1]}function i(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function o(t,e){this._context=t,this._k=(1-e)/6}function r(t,e){this._context=t,this._alpha=e}n.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},o.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:i(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:i(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:!function(t,e,n){var i=t._x1,o=t._y1,r=t._x2,s=t._y2;if(1e-12<t._l01_a){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,o=(o*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(1e-12<t._l23_a){var h=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);r=(r*h+t._x1*t._l23_2a-e*t._l12_2a)/u,s=(s*h+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(i,o,r,s,t._x2,t._y2)}(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var a=function e(n){function t(t){return n?new r(t,n):new o(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function c(t){return t<0?-1:1}function h(t,e,n){var i=t._x1-t._x0,o=e-t._x1,r=(t._y1-t._y0)/(i||o<0&&-0),s=(n-t._y1)/(o||i<0&&-0),a=(r*o+s*i)/(i+o);return(c(r)+c(s))*Math.min(Math.abs(r),Math.abs(s),.5*Math.abs(a))||0}function u(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function l(t,e,n){var i=t._x0,o=t._y0,r=t._x1,s=t._y1,a=(r-i)/3;t._context.bezierCurveTo(i+a,o+a*e,r-a,s-a*n,r,s)}function A(t){this._context=t}function L(t){this._context=t}A.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:l(this,this._t0,u(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,l(this,u(this,n=h(this,t,e)),n);break;default:l(this,this._t0,n=h(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(function(t){this._context=new L(t)}.prototype=Object.create(A.prototype)).point=function(t,e){A.prototype.point.call(this,e,t)},L.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,o,r){this._context.bezierCurveTo(e,t,i,n,r,o)}};var P=0,k=1,M=2,S={props:["pin","change","remove"],inject:["editor","connection"],data:function(){return{state:M}},mounted:function(){window.addEventListener("pointermove",this.move),window.addEventListener("pointerup",this.up)},destroyed:function(){window.removeEventListener("pointermove",this.move),window.removeEventListener("pointerup",this.up)},methods:{setPosition:function(t,e){this.$emit("change",{x:t,y:e}),this.$forceUpdate()},down:function(t){t.stopPropagation(),this.state=P},move:function(t){if(this.state!==M){this.state=k,t.preventDefault();var e=this.editor.view.area.mouse;this.setPosition(e.x,e.y)}},up:function(t){this.state=M},pinup:function(){this.state!==k&&this.$emit("remove",this.pin)}}};var T=function(t,e,n,i,o,r,s,a,c,h){"boolean"!=typeof s&&(c=a,a=s,s=!1);var u,l="function"==typeof n?n.options:n;if(t&&t.render&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,o&&(l.functional=!0)),i&&(l._scopeId=i),r?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(r)},l._ssrRegister=u):e&&(u=s?function(){e.call(this,h(this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),u)if(l.functional){var _=l.render;l.render=function(t,e){return u.call(e),_(t,e)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,u):[u]}return n},C="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var O=document.head||document.getElementsByTagName("head")[0],N={};function j(t){return function(t,e){return function(t,e){var n=C?e.media||"default":t,i=N[n]||(N[n]={ids:new Set,styles:[]});if(!i.ids.has(t)){i.ids.add(t);var o=e.source;if(e.map&&(o+="\n/*# sourceURL="+e.map.sources[0]+" */",o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",e.media&&i.element.setAttribute("media",e.media),O.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(o),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{var r=i.ids.size-1,s=document.createTextNode(o),a=i.element.childNodes;a[r]&&i.element.removeChild(a[r]),a.length?i.element.insertBefore(s,a[r]):i.element.appendChild(s)}}}(t,e)}}function $(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"pin",style:{left:t.pin.x+"px",top:t.pin.y+"px"},on:{pointerdown:t.down,dblclick:t.pinup}})}function R(){var n=this,t=n.$createElement,i=n._self._c||t;return i("div",n._l(n.pins,function(e){return i("Pin",{key:e.x+" "+e.y,attrs:{pin:e},on:{change:function(t){return n.change(e,t)},remove:function(t){return n.remove(e)}}})}),1)}var D=S,q=($._withStripped=!0,{props:["pins"],inject:["editor","connection"],methods:{change:function(t,e){var n=e.x,i=e.y;t.x=n,t.y=i,this.editor.view.connections.get(this.connection).update()},remove:function(t){this.pins.splice(this.pins.indexOf(t),1),this.editor.view.connections.get(this.connection).update(),this.$forceUpdate()}},components:{Pin:T({render:$,staticRenderFns:[]},function(t){t&&t("data-v-41f117d7_0",{source:".pin[data-v-41f117d7] {\n  position: absolute;\n  display: inline;\n  width: 20px;\n  height: 20px;\n  background: #8db3d3;\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n}\n\n/*# sourceMappingURL=Pin.vue.map */",map:{version:3,sources:["/home/DN220789NKS1/www/connection-reroute-plugin/src/Pin.vue","Pin.vue"],names:[],mappings:"AA+DA;EACA,kBAAA;EACA,eAAA;EACA,WALA;EAMA,YANA;EAOA,mBAAA;EACA,kBAAA;EACA,gCAAA;AAAA;;AC7DA,kCAAkC",file:"Pin.vue",sourcesContent:["<template lang=\"pug\">\n.pin(\n  :style=\"{left: pin.x+'px', top: pin.y+'px'}\"\n  @pointerdown=\"down\"\n  @dblclick=\"pinup\"\n)\n</template>\n\n\n<script>\nconst State = { PICKED: 0, MOVED: 1, DROPED: 2}\n\nexport default {\n  props: ['pin', 'change', 'remove'],\n  inject: ['editor', 'connection'],\n  data() {\n    return {\n      state: State.DROPED\n    }\n  },\n  mounted() {\n    window.addEventListener('pointermove', this.move);\n    window.addEventListener('pointerup', this.up);\n  },\n  destroyed() {\n    window.removeEventListener('pointermove', this.move);\n    window.removeEventListener('pointerup', this.up);\n  },\n  methods: {\n    setPosition(x, y) {\n      this.$emit('change', {x, y});\n      this.$forceUpdate();\n    },\n    down(e){\n      e.stopPropagation();\n      this.state = State.PICKED;\n    },\n    move(e){\n      if(this.state === State.DROPED) return;\n\n      this.state = State.MOVED;\n      e.preventDefault();\n\n      const { mouse } = this.editor.view.area;\n\n      this.setPosition(mouse.x, mouse.y);\n    },\n    up(e) {\n      this.state = State.DROPED;\n    },\n    pinup() {\n      if(this.state === State.MOVED) return;\n\n      this.$emit('remove', this.pin);\n    }\n  }\n}\n<\/script>\n\n\n<style lang=\"sass\" scoped>\n$size: 20px\n\n.pin\n  position: absolute\n  display: inline\n  width: $size\n  height: $size\n  background: lighten(steelblue, 20%)\n  border-radius: 50%\n  transform: translate(-50%, -50%)\n</style>\n",".pin {\n  position: absolute;\n  display: inline;\n  width: 20px;\n  height: 20px;\n  background: #8db3d3;\n  border-radius: 50%;\n  transform: translate(-50%, -50%); }\n\n/*# sourceMappingURL=Pin.vue.map */"]},media:void 0})},D,"data-v-41f117d7",!1,void 0,j,void 0)}}),z=(R._withStripped=!0,T({render:R,staticRenderFns:[]},void 0,q,void 0,!1,void 0,void 0,void 0));function I(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function U(t){for(var e,n,i,o,r,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],a=-1,c=1/0,h=0;h<s.length-1;h++)if(F(t,s[h],s[h+1])){var u=(e=t,n=s[h],i=s[h+1],void 0,o=(i.y-n.y)*e.x-(i.x-n.x)*e.y+i.x*n.y-i.y*n.x,r=Math.pow(i.y-n.y,2)+Math.pow(i.x-n.x,2),Math.abs(o)/Math.sqrt(r));u<c&&(a=h,c=u)}return-1===a?function(t){for(var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=-1,i=1/0,o=0;o<e.length;o++){var r=I(t,e[o]);r<i&&(n=o,i=r)}return 0===n?0:n===e.length-1?n-1:I(t,e[n-1])<I(e[n],e[n-1])?n-1:n}(t,s):a}function F(t,e,n){var i=e.x,o=e.y,r=n.x,s=n.y,a=t.x,c=t.y;return i<a&&a<r&&o<c&&c<s||(r<a&&a<i&&s<c&&c<o||(i<a&&a<r&&c<o&&s<c||r<a&&a<i&&c<s&&o<c))}function G(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,i=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],o=t.getTotalLength()*n,r=t.getPointAtLength(o+e),s=t.getPointAtLength(o),a=180+(i?function(t,e){var n=t.x,i=t.y,o=n-e.x,r=i-e.y;return 180*Math.atan2(r,o)/Math.PI}(r,s):0);return"translate(".concat(r.x,", ").concat(r.y,") rotate(").concat(a,")")}var B={name:"connection-reroute",install:function(u,t){var e=t.curve,h=void 0===e?a.alpha(1):e,n=t.curvature,l=void 0===n?.05:n,i=t.arrow,o=void 0===i?{color:"steelblue",marker:"M-5,-10 L-5,10 L20,0 z"}:i;u.on("connectionpath",function(t){var e=t.connection,n=f(t.points,4),i=n[0],o=n[1],r=n[2],s=n[3],a=e&&e.data.pins?e.data.pins:[],c=function(t,e){var n=t[0],i=t[1],o=t[t.length-2],r=t[t.length-1],s=n[0]+Math.abs(i[0]-n[0])*e,a=r[0]-Math.abs(r[0]-o[0])*e;return(t=p(t)).splice(1,0,[s,n[1]]),t.splice(t.length-1,0,[a,r[1]]),t}([[i,o]].concat(p(a.map(function(t){return[t.x,t.y]})),[[r,s]]),l);t.d=function(){var s=g,a=E,c=x(!0),h=null,u=m,l=null;function e(t){var e,n,i,o=t.length,r=!1;for(null==h&&(l=u(i=v())),e=0;e<=o;++e)!(e<o&&c(n=t[e],e,t))===r&&((r=!r)?l.lineStart():l.lineEnd()),r&&l.point(+s(n,e,t),+a(n,e,t));if(i)return l=null,i+""||null}return e.x=function(t){return arguments.length?(s="function"==typeof t?t:x(+t),e):s},e.y=function(t){return arguments.length?(a="function"==typeof t?t:x(+t),e):a},e.defined=function(t){return arguments.length?(c="function"==typeof t?t:x(!!t),e):c},e.curve=function(t){return arguments.length?(u=t,null!=h&&(l=u(h)),e):u},e.context=function(t){return arguments.length?(null==t?h=l=null:l=u(h=t),e):h},e}().x(function(t){return t[0]}).y(function(t){return t[1]}).curve(h)(c)});var r=!1;u.on("renderconnection",function(t){var e=t.el,a=t.connection,n=e.querySelector(".connection path"),c=a.data.pins||(a.data.pins=[]);if(e.classList.add("bpm-connect-rete"),!n)throw new Error("<path> not found");a.data.color&&n.style.setProperty("stroke",a.data.color),a.data.state_color&&n.style.setProperty("stroke",a.data.state_color),n.addEventListener("click",function(){r&&r.classList.remove("select-connection"),e.classList.add("select-connection"),u.last_active_connect=e,r=e}),a.addPink=function(){var t=_({},u.view.area.mouse),e=f(u.view.connections.get(a).getPoints(),4),n=e[0],i=e[1],o=e[2],r=e[3],s=U(t,[{x:n,y:i}].concat(p(c),[{x:o,y:r}]));c.splice(s,0,t),h.$children[0].$forceUpdate(),u.view.connections.get(a).update()},n.addEventListener("dblclick",function(){var t=_({},u.view.area.mouse),e=f(u.view.connections.get(a).getPoints(),4),n=e[0],i=e[1],o=e[2],r=e[3],s=U(t,[{x:n,y:i}].concat(p(c),[{x:o,y:r}]));c.splice(s,0,t),h.$children[0].$forceUpdate(),u.view.connections.get(a).update()});var i=document.createElement("div");e.appendChild(i);var h=new s({provide:{editor:u,connection:a},render:function(t){return t(z,{props:{pins:c}})}}).$mount(i)}),o&&(u.on("renderconnection",function(t){var e=t.el,n=e.querySelector("path"),i=document.createElementNS("http://www.w3.org/2000/svg","path");e.querySelector("svg").appendChild(i),i.classList.add("marker"),i.setAttribute("fill",o.color||"steelblue"),i.setAttribute("d",o.marker||"M-5,-10 L-5,10 L20,0 z"),i.setAttribute("transform",G(n,-25))}),u.on("updateconnection",function(t){var e=t.el,n=t.connection,i=e.querySelector("path"),o=e.querySelector(".marker");n.data.color?i.style.setProperty("stroke",n.data.color):i.style.setProperty("stroke","steelblue"),n.data.state_color?(i.style.setProperty("stroke",n.data.state_color),e.classList.add("select-connection-step")):e.classList.remove("select-connection-step"),o.setAttribute("transform",G(i,-25))}))}};t.default=B,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=connection-reroute-plugin.min.js.map
