/*!
* rete-connection-reroute-plugin v0.4.0 
* (c) 2021 Vitaliy Stoliarov 
* Released under the MIT license.
*/
!function(t){"use strict";var c,n=Object.prototype,h=n.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",i=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag",s="object"==typeof module,a=t.regeneratorRuntime;if(a)s&&(module.exports=a);else{(a=t.regeneratorRuntime=s?module.exports:{}).wrap=m;var u="suspendedStart",l="suspendedYield",_="executing",f="completed",p={},d={};d[r]=function(){return this};var y=Object.getPrototypeOf,v=y&&y(y(T([])));v&&v!==n&&h.call(v,r)&&(d=v);var x=E.prototype=w.prototype=Object.create(d);b.prototype=x.constructor=E,E.constructor=b,E[o]=b.displayName="GeneratorFunction",a.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===b||"GeneratorFunction"===(n.displayName||n.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,o in t||(t[o]="GeneratorFunction")),t.prototype=Object.create(x),t},a.awrap=function(t){return{__await:t}},A(L.prototype),L.prototype[i]=function(){return this},a.AsyncIterator=L,a.async=function(t,n,e,i){var r=new L(m(t,n,e,i));return a.isGeneratorFunction(n)?r:r.next().then(function(t){return t.done?t.value:r.next()})},A(x),x[o]="Generator",x[r]=function(){return this},x.toString=function(){return"[object Generator]"},a.keys=function(e){var i=[];for(var t in e)i.push(t);return i.reverse(),function t(){for(;i.length;){var n=i.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},a.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(S),!t)for(var n in this)"t"===n.charAt(0)&&h.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=c)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function t(t,n){return o.type="throw",o.arg=e,i.next=t,n&&(i.method="next",i.arg=c),!!n}for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n],o=r.completion;if("root"===r.tryLoc)return t("end");if(r.tryLoc<=this.prev){var s=h.call(r,"catchLoc"),a=h.call(r,"finallyLoc");if(s&&a){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return t(r.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}}},abrupt:function(t,n){for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e];if(i.tryLoc<=this.prev&&h.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=n&&n<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=n,r?(this.method="next",this.next=r.finallyLoc,p):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),p},finish:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),S(e),p}},catch:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var i=e.completion;if("throw"===i.type){var r=i.arg;S(e)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:T(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=c),p}}}function m(t,n,e,i){var r=n&&n.prototype instanceof w?n:w,o=Object.create(r.prototype),s=new k(i||[]);return o._invoke=function(o,s,a){var c=u;return function(t,n){if(c===_)throw new Error("Generator is already running");if(c===f){if("throw"===t)throw n;return C()}for(a.method=t,a.arg=n;;){var e=a.delegate;if(e){var i=P(e,a);if(i){if(i===p)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===u)throw c=f,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=_;var r=g(o,s,a);if("normal"===r.type){if(c=a.done?f:l,r.arg===p)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c=f,a.method="throw",a.arg=r.arg)}}}(t,e,s),o}function g(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}function w(){}function b(){}function E(){}function A(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function L(c){var n;this._invoke=function(e,i){function t(){return new Promise(function(t,n){!function n(t,e,i,r){var o=g(c[t],c,e);if("throw"!==o.type){var s=o.arg,a=s.value;return a&&"object"==typeof a&&h.call(a,"__await")?Promise.resolve(a.__await).then(function(t){n("next",t,i,r)},function(t){n("throw",t,i,r)}):Promise.resolve(a).then(function(t){s.value=t,i(s)},r)}r(o.arg)}(e,i,t,n)})}return n=n?n.then(t,t):t()}}function P(t,n){var e=t.iterator[n.method];if(e===c){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=c,P(t,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=g(e,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var r=i.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=c),n.delegate=null,p):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function M(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function S(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function T(n){if(n){var t=n[r];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var e=-1,i=function t(){for(;++e<n.length;)if(h.call(n,e))return t.value=n[e],t.done=!1,t;return t.value=c,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:c,done:!0}}}(function(){return this}()||Function("return this")()),function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],n):n((t=t||self).ConnectionReroutePlugin={},t.Vue)}(this,function(t,s){"use strict";function _(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),n.forEach(function(t){var n,e,i;n=r,i=o[e=t],e in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i})}return r}function f(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(e.push(s.value),!n||e.length!==n);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}s=s&&s.hasOwnProperty("default")?s.default:s;var w=Math.PI,d=2*w,b=1e-6,y=d-b;function n(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function v(){return new n}function x(t){return function(){return t}}n.prototype=v.prototype={constructor:n,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,i){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+i)},bezierCurveTo:function(t,n,e,i,r,o){this._+="C"+ +t+","+ +n+","+ +e+","+ +i+","+(this._x1=+r)+","+(this._y1=+o)},arcTo:function(t,n,e,i,r){t=+t,n=+n,e=+e,i=+i,r=+r;var o=this._x1,s=this._y1,a=e-t,c=i-n,h=o-t,u=s-n,l=h*h+u*u;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(b<l)if(Math.abs(u*a-c*h)>b&&r){var _=e-o,f=i-s,p=a*a+c*c,d=_*_+f*f,y=Math.sqrt(p),v=Math.sqrt(l),x=r*Math.tan((w-Math.acos((p+l-d)/(2*y*v)))/2),m=x/v,g=x/y;Math.abs(m-1)>b&&(this._+="L"+(t+m*h)+","+(n+m*u)),this._+="A"+r+","+r+",0,0,"+ +(h*f<u*_)+","+(this._x1=t+g*a)+","+(this._y1=n+g*c)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,n,e,i,r,o){t=+t,n=+n,o=!!o;var s=(e=+e)*Math.cos(i),a=e*Math.sin(i),c=t+s,h=n+a,u=1^o,l=o?i-r:r-i;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+c+","+h:(Math.abs(this._x1-c)>b||Math.abs(this._y1-h)>b)&&(this._+="L"+c+","+h),e&&(l<0&&(l=l%d+d),y<l?this._+="A"+e+","+e+",0,1,"+u+","+(t-s)+","+(n-a)+"A"+e+","+e+",0,1,"+u+","+(this._x1=c)+","+(this._y1=h):b<l&&(this._+="A"+e+","+e+",0,"+ +(w<=l)+","+u+","+(this._x1=t+e*Math.cos(r))+","+(this._y1=n+e*Math.sin(r))))},rect:function(t,n,e,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +i+"h"+-e+"Z"},toString:function(){return this._}};Math.PI;function e(t){this._context=t}function m(t){return new e(t)}function g(t){return t[0]}function E(t){return t[1]}function i(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function r(t,n){this._context=t,this._k=(1-n)/6}function o(t,n){this._context=t,this._alpha=n}e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}},r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:i(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:i(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}},o.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,i=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:!function(t,n,e){var i=t._x1,r=t._y1,o=t._x2,s=t._y2;if(1e-12<t._l01_a){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,r=(r*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(1e-12<t._l23_a){var h=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*h+t._x1*t._l23_2a-n*t._l12_2a)/u,s=(s*h+t._y1*t._l23_2a-e*t._l12_2a)/u}t._context.bezierCurveTo(i,r,o,s,t._x2,t._y2)}(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var a=function n(e){function t(t){return e?new o(t,e):new r(t,0)}return t.alpha=function(t){return n(+t)},t}(.5);function c(t){return t<0?-1:1}function h(t,n,e){var i=t._x1-t._x0,r=n-t._x1,o=(t._y1-t._y0)/(i||r<0&&-0),s=(e-t._y1)/(r||i<0&&-0),a=(o*r+s*i)/(i+r);return(c(o)+c(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function u(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function l(t,n,e){var i=t._x0,r=t._y0,o=t._x1,s=t._y1,a=(o-i)/3;t._context.bezierCurveTo(i+a,r+a*n,o-a,s-a*e,o,s)}function A(t){this._context=t}function L(t){this._context=t}A.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:l(this,this._t0,u(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(n=+n,(t=+t)!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,l(this,u(this,e=h(this,t,n)),e);break;default:l(this,this._t0,e=h(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(function(t){this._context=new L(t)}.prototype=Object.create(A.prototype)).point=function(t,n){A.prototype.point.call(this,n,t)},L.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,i,r,o){this._context.bezierCurveTo(n,t,i,e,o,r)}};var P=0,M=1,S=2,k={props:["pin","change","remove"],inject:["editor","connection"],data:function(){return{state:S}},mounted:function(){window.addEventListener("pointermove",this.move),window.addEventListener("pointerup",this.up)},destroyed:function(){window.removeEventListener("pointermove",this.move),window.removeEventListener("pointerup",this.up)},methods:{setPosition:function(t,n){this.$emit("change",{x:t,y:n}),this.$forceUpdate()},down:function(t){t.stopPropagation(),this.state=P},move:function(t){if(this.state!==S){this.state=M,t.preventDefault();var n=this.editor.view.area.mouse;this.setPosition(n.x,n.y)}},up:function(t){this.state=S},pinup:function(){this.state!==M&&this.$emit("remove",this.pin)}}};var T=function(t,n,e,i,r,o,s,a,c,h){"boolean"!=typeof s&&(c=a,a=s,s=!1);var u,l="function"==typeof e?e.options:e;if(t&&t.render&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,r&&(l.functional=!0)),i&&(l._scopeId=i),o?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=u):n&&(u=s?function(){n.call(this,h(this.$root.$options.shadowRoot))}:function(t){n.call(this,a(t))}),u)if(l.functional){var _=l.render;l.render=function(t,n){return u.call(n),_(t,n)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,u):[u]}return e},C="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var O=document.head||document.getElementsByTagName("head")[0],N={};function j(t){return function(t,n){return function(t,n){var e=C?n.media||"default":t,i=N[e]||(N[e]={ids:new Set,styles:[]});if(!i.ids.has(t)){i.ids.add(t);var r=n.source;if(n.map&&(r+="\n/*# sourceURL="+n.map.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",n.media&&i.element.setAttribute("media",n.media),O.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(r),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{var o=i.ids.size-1,s=document.createTextNode(r),a=i.element.childNodes;a[o]&&i.element.removeChild(a[o]),a.length?i.element.insertBefore(s,a[o]):i.element.appendChild(s)}}}(t,n)}}function $(){var t=this,n=t.$createElement;return(t._self._c||n)("div",{staticClass:"pin",style:{left:t.pin.x+"px",top:t.pin.y+"px"},on:{pointerdown:t.down,dblclick:t.pinup}})}function R(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._l(e.pins,function(n){return i("Pin",{key:n.x+" "+n.y,attrs:{pin:n},on:{change:function(t){return e.change(n,t)},remove:function(t){return e.remove(n)}}})}),1)}var D=k,q=($._withStripped=!0,{props:["pins"],inject:["editor","connection"],methods:{change:function(t,n){var e=n.x,i=n.y;t.x=e,t.y=i,this.editor.view.connections.get(this.connection).update()},remove:function(t){this.pins.splice(this.pins.indexOf(t),1),this.editor.view.connections.get(this.connection).update(),this.$forceUpdate()}},components:{Pin:T({render:$,staticRenderFns:[]},function(t){t&&t("data-v-41f117d7_0",{source:".pin[data-v-41f117d7] {\n  position: absolute;\n  display: inline;\n  width: 20px;\n  height: 20px;\n  background: #8db3d3;\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n}\n\n/*# sourceMappingURL=Pin.vue.map */",map:{version:3,sources:["/home/DN220789NKS1/www/connection-reroute-plugin/src/Pin.vue","Pin.vue"],names:[],mappings:"AA+DA;EACA,kBAAA;EACA,eAAA;EACA,WALA;EAMA,YANA;EAOA,mBAAA;EACA,kBAAA;EACA,gCAAA;AAAA;;AC7DA,kCAAkC",file:"Pin.vue",sourcesContent:["<template lang=\"pug\">\n.pin(\n  :style=\"{left: pin.x+'px', top: pin.y+'px'}\"\n  @pointerdown=\"down\"\n  @dblclick=\"pinup\"\n)\n</template>\n\n\n<script>\nconst State = { PICKED: 0, MOVED: 1, DROPED: 2}\n\nexport default {\n  props: ['pin', 'change', 'remove'],\n  inject: ['editor', 'connection'],\n  data() {\n    return {\n      state: State.DROPED\n    }\n  },\n  mounted() {\n    window.addEventListener('pointermove', this.move);\n    window.addEventListener('pointerup', this.up);\n  },\n  destroyed() {\n    window.removeEventListener('pointermove', this.move);\n    window.removeEventListener('pointerup', this.up);\n  },\n  methods: {\n    setPosition(x, y) {\n      this.$emit('change', {x, y});\n      this.$forceUpdate();\n    },\n    down(e){\n      e.stopPropagation();\n      this.state = State.PICKED;\n    },\n    move(e){\n      if(this.state === State.DROPED) return;\n\n      this.state = State.MOVED;\n      e.preventDefault();\n\n      const { mouse } = this.editor.view.area;\n\n      this.setPosition(mouse.x, mouse.y);\n    },\n    up(e) {\n      this.state = State.DROPED;\n    },\n    pinup() {\n      if(this.state === State.MOVED) return;\n\n      this.$emit('remove', this.pin);\n    }\n  }\n}\n<\/script>\n\n\n<style lang=\"sass\" scoped>\n$size: 20px\n\n.pin\n  position: absolute\n  display: inline\n  width: $size\n  height: $size\n  background: lighten(steelblue, 20%)\n  border-radius: 50%\n  transform: translate(-50%, -50%)\n</style>\n",".pin {\n  position: absolute;\n  display: inline;\n  width: 20px;\n  height: 20px;\n  background: #8db3d3;\n  border-radius: 50%;\n  transform: translate(-50%, -50%); }\n\n/*# sourceMappingURL=Pin.vue.map */"]},media:void 0})},D,"data-v-41f117d7",!1,void 0,j,void 0)}}),z=(R._withStripped=!0,T({render:R,staticRenderFns:[]},void 0,q,void 0,!1,void 0,void 0,void 0));function I(t,n){return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))}function U(t){for(var n,e,i,r,o,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],a=-1,c=1/0,h=0;h<s.length-1;h++)if(F(t,s[h],s[h+1])){var u=(n=t,e=s[h],i=s[h+1],void 0,r=(i.y-e.y)*n.x-(i.x-e.x)*n.y+i.x*e.y-i.y*e.x,o=Math.pow(i.y-e.y,2)+Math.pow(i.x-e.x,2),Math.abs(r)/Math.sqrt(o));u<c&&(a=h,c=u)}return-1===a?function(t){for(var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],e=-1,i=1/0,r=0;r<n.length;r++){var o=I(t,n[r]);o<i&&(e=r,i=o)}return 0===e?0:e===n.length-1?e-1:I(t,n[e-1])<I(n[e],n[e-1])?e-1:e}(t,s):a}function F(t,n,e){var i=n.x,r=n.y,o=e.x,s=e.y,a=t.x,c=t.y;return i<a&&a<o&&r<c&&c<s||(o<a&&a<i&&s<c&&c<r||(i<a&&a<o&&c<r&&s<c||o<a&&a<i&&c<s&&r<c))}function G(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,i=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],r=t.getTotalLength()*e,o=t.getPointAtLength(r+n),s=t.getPointAtLength(r),a=180+(i?function(t,n){var e=t.x,i=t.y,r=e-n.x,o=i-n.y;return 180*Math.atan2(o,r)/Math.PI}(o,s):0);return"translate(".concat(o.x,", ").concat(o.y,") rotate(").concat(a,")")}var B={name:"connection-reroute",install:function(u,t){var n=t.curve,h=void 0===n?a.alpha(1):n,e=t.curvature,l=void 0===e?.05:e,i=t.arrow,r=void 0===i?{color:"steelblue",marker:"M-5,-10 L-5,10 L20,0 z"}:i;u.on("connectionpath",function(t){var n=t.connection,e=f(t.points,4),i=e[0],r=e[1],o=e[2],s=e[3],a=n&&n.data.pins?n.data.pins:[],c=function(t,n){var e=t[0],i=t[1],r=t[t.length-2],o=t[t.length-1],s=e[0]+Math.abs(i[0]-e[0])*n,a=o[0]-Math.abs(o[0]-r[0])*n;return(t=p(t)).splice(1,0,[s,e[1]]),t.splice(t.length-1,0,[a,o[1]]),t}([[i,r]].concat(p(a.map(function(t){return[t.x,t.y]})),[[o,s]]),l);t.d=function(){var s=g,a=E,c=x(!0),h=null,u=m,l=null;function n(t){var n,e,i,r=t.length,o=!1;for(null==h&&(l=u(i=v())),n=0;n<=r;++n)!(n<r&&c(e=t[n],n,t))===o&&((o=!o)?l.lineStart():l.lineEnd()),o&&l.point(+s(e,n,t),+a(e,n,t));if(i)return l=null,i+""||null}return n.x=function(t){return arguments.length?(s="function"==typeof t?t:x(+t),n):s},n.y=function(t){return arguments.length?(a="function"==typeof t?t:x(+t),n):a},n.defined=function(t){return arguments.length?(c="function"==typeof t?t:x(!!t),n):c},n.curve=function(t){return arguments.length?(u=t,null!=h&&(l=u(h)),n):u},n.context=function(t){return arguments.length?(null==t?h=l=null:l=u(h=t),n):h},n}().x(function(t){return t[0]}).y(function(t){return t[1]}).curve(h)(c)});var o=!1;u.on("renderconnection",function(t){var n=t.el,a=t.connection,e=n.querySelector(".connection path"),c=a.data.pins||(a.data.pins=[]);if(n.classList.add("bpm-connect-rete"),!e)throw new Error("<path> not found");a.data.color&&e.style.setProperty("stroke",a.data.color),e.addEventListener("click",function(){o&&o.classList.remove("select-connection"),n.classList.add("select-connection"),u.last_active_connect=n,o=n}),a.addPink=function(){var t=_({},u.view.area.mouse),n=f(u.view.connections.get(a).getPoints(),4),e=n[0],i=n[1],r=n[2],o=n[3],s=U(t,[{x:e,y:i}].concat(p(c),[{x:r,y:o}]));c.splice(s,0,t),h.$children[0].$forceUpdate(),u.view.connections.get(a).update()},e.addEventListener("dblclick",function(){var t=_({},u.view.area.mouse),n=f(u.view.connections.get(a).getPoints(),4),e=n[0],i=n[1],r=n[2],o=n[3],s=U(t,[{x:e,y:i}].concat(p(c),[{x:r,y:o}]));c.splice(s,0,t),h.$children[0].$forceUpdate(),u.view.connections.get(a).update()});var i=document.createElement("div");n.appendChild(i);var h=new s({provide:{editor:u,connection:a},render:function(t){return t(z,{props:{pins:c}})}}).$mount(i)}),r&&(u.on("renderconnection",function(t){var n=t.el,e=n.querySelector("path"),i=document.createElementNS("http://www.w3.org/2000/svg","path");n.querySelector("svg").appendChild(i),i.classList.add("marker"),i.setAttribute("fill",r.color||"steelblue"),i.setAttribute("d",r.marker||"M-5,-10 L-5,10 L20,0 z"),i.setAttribute("transform",G(e,-25))}),u.on("updateconnection",function(t){var n=t.el,e=t.connection,i=n.querySelector("path"),r=n.querySelector(".marker");e.data.color&&i.style.setProperty("stroke",e.data.color),r.setAttribute("transform",G(i,-25))}))}};t.default=B,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=connection-reroute-plugin.min.js.map
